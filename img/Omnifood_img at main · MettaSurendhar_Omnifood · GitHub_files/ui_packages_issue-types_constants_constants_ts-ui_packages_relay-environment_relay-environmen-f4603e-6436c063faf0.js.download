"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_issue-types_constants_constants_ts-ui_packages_relay-environment_relay-environmen-f4603e"],{69719:(e,t,r)=>{let s;r.d(t,{H:()=>M});var n=r(35750),i=r(18150),a=r(85242),o=r(88243),l=r(16213),c=r(10204),u=new WeakMap,d=new WeakSet;let AliveSession=class AliveSession extends c.ib{constructor(e,t,r,s,n){super(e,()=>(0,o._)(this,d,h).call(this),r,s,void 0,n),(0,l._)(this,d),(0,i._)(this,u,{writable:!0,value:void 0}),(0,a._)(this,u,t)}};function h(){return p((0,n._)(this,u))}async function p(e){let t=await f(e);return t&&t.url&&t.token?b(t.url,t.token):null}async function f(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function b(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var g=r(70170),w=r(32475),m=r(85351),_=r(23683),y=r(27851);function S(e,{channel:t,type:r,data:s}){for(let n of e)n.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:s}}))}var k=new WeakMap,v=new WeakMap,E=new WeakMap,P=new WeakMap,T=new WeakMap,R=new WeakSet;let N=class AliveSessionProxy{subscribe(e){let t=(0,n._)(this,v).add(...e);t.length&&(0,n._)(this,k).port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),s=e.reduce((e,t)=>{let s=t.topic.name;return(0,c.JR)(s)&&!r.has(s)&&e.add(s),e},new Set);s.size&&(0,n._)(this,k).port.postMessage({requestPresence:Array.from(s)})}unsubscribeAll(...e){let t=(0,n._)(this,v).drain(...e);t.length&&(0,n._)(this,k).port.postMessage({unsubscribe:t});let r=(0,n._)(this,E).removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)(0,n._)(this,E).setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:(0,n._)(this,E).getChannelMetadata(r)});(0,n._)(this,k).port.postMessage({updatePresenceMetadata:t})}online(){(0,n._)(this,k).port.postMessage({online:!0})}offline(){(0,n._)(this,k).port.postMessage({online:!1})}hangup(){(0,n._)(this,k).port.postMessage({hangup:!0})}constructor(e,t,r,s,u,d){(0,l._)(this,R),(0,i._)(this,k,{writable:!0,value:void 0}),(0,i._)(this,v,{writable:!0,value:new c.m0}),(0,i._)(this,E,{writable:!0,value:new c.VH}),(0,i._)(this,P,{writable:!0,value:void 0}),(0,i._)(this,T,{writable:!0,value:new Map}),(0,a._)(this,P,u),(0,a._)(this,k,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${s}`,type:"module"})),(0,n._)(this,k).port.onmessage=({data:e})=>(0,o._)(this,R,A).call(this,e),(0,n._)(this,k).port.postMessage({connect:{url:t,refreshUrl:r,options:d}})}};function A(e){let{channel:t}=e;if("presence"===e.type){let r=(0,n._)(this,T).get(t);r||(r=(0,g.s)((e,r)=>{(0,n._)(this,P).call(this,e,r),(0,n._)(this,T).delete(t)},100),(0,n._)(this,T).set(t,r)),r((0,n._)(this,v).subscribers(t),e);return}(0,n._)(this,P).call(this,(0,n._)(this,v).subscribers(t),e)}async function O(){let e=function(){let e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href");return e&&e.startsWith("/")?e:null}();if(!e)return;let t=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!t)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!r)return;let s=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!s)return;let n=(()=>{let n=(0,y.G7)("alive_legacy_retries")?{socketPolicy:{timeout:4e3,attempts:7}}:{};if(!(0,_.nr)()&&"SharedWorker"in window&&"true"!==(0,m.A)("localStorage").getItem("bypassSharedWorker"))try{return new N(e,t,r,s,S,n)}catch{}return new AliveSession(t,r,!1,S,n)})();return window.addEventListener("online",()=>n.online()),window.addEventListener("offline",()=>n.offline()),window.addEventListener("pagehide",()=>{"hangup"in n&&n.hangup()}),n}async function x(){return await w.G,O()}function M(){return s||(s=x())}},35932:(e,t,r)=>{r.d(t,{$:()=>a});var s=r(10204),n=r(76899);let i=new WeakMap;function a(e,t,r){let a;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=s.KK.parse(t);if(!o)throw Error("Invalid channel name");let l={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&r(e.detail.data)}},topic:o},c=((a=i.get(e))||(a={subscribe:(0,n.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,n.rK)(t=>e.unsubscribeAll(...t))},i.set(e,a)),a);return c.subscribe([l]),{unsubscribe:()=>c.unsubscribeAll(l.subscriber)}}},76899:(e,t,r)=>{function s(){return Promise.resolve()}function n(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,s=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return s;try{var n;await Promise.race([s,(n=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",n.aborted?t(r):n.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function a(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>n,k2:()=>s,rK:()=>a,uk:()=>i})},3785:(e,t,r)=>{r.d(t,{Av:()=>o,BM:()=>n,Gr:()=>l,HX:()=>d,M_:()=>h,RD:()=>u,rb:()=>i});var s=r(96679);let n="GraphQLTraces",i="GraphQLTracingRefresh",a=decodeURIComponent(new URLSearchParams(s.fV.search).get("disable_clusters")||"").split(",").filter(e=>""!==e);function o(e){if(!s.cg||!l()||!e)return;let t=s.cg;t&&!t[n]&&(t[n]=[]),t&&e.__trace&&(t[n].push(e.__trace),"function"==typeof t[i]&&t[i]())}function l(){let e=s.cg;return"true"===new URLSearchParams(s.fV.search).get("_tracing")||e&&void 0!==e[n]}function c(){return a.length>0}function u(e){if(!l()&&!c())return e;let t=new URL(e,s.fV.origin);return l()&&t.searchParams.set("_tracing","true"),c()&&t.searchParams.set("disable_clusters",a.join(",")),t.pathname+t.search}function d(e){return a.indexOf(e)>-1}function h(e){let t=a.indexOf(e);t>-1?a.splice(t,1):a.push(e);let r=new URLSearchParams(s.fV.search);r.set("disable_clusters",a.join(",")),s.fV.search=r.toString()}},27739:(e,t,r)=>{r.d(t,{AE:()=>n,En:()=>s,gO:()=>o,jX:()=>i,u4:()=>a});let s=25,n=50,i=64,a=256,o=["issue","pr","pull-request","pull request"]},96615:(e,t,r)=>{r.d(t,{VB:()=>SSRNetwork,SD:()=>N,E7:()=>R});var s=r(50467),n=r(40961),i=r(69487),a=r(3785),o=r(60039),l=r(96679),c=r(22353);let u=["SAML","SERVICE_UNAVAILABLE"],d={FORBIDDEN:["SAML error"],AUTHENTICATION:["Couldn\u2019t authenticate you"]},h={NOT_FOUND:[["repository","issue"]]};var p=r(26559);function f(e,t){let r=h[e];if(!r)return!1;for(let e of r){if(t.length!==e.length)continue;let r=!0;for(let s=0;s<t.length;s++)if(t[s]!==e[s]&&"*"!==e[s]){r=!1;break}if(r)return!1}return!0}let b=class ValidationError extends Error{constructor(e,t,r){super(e,t),(0,s._)(this,"catalogService",void 0),this.catalogService=r,this.name="ValidationError"}};async function g(e,t,r){if(e.status>401&&404!==e.status){let s=await e.text(),n={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:r,failureRequestId:e.headers.get("X-Github-Request-Id")},i=`HTTP error (${e.status}): ${s||"No additional text"}.
    Error Info: ${JSON.stringify(n)}`;if(429===e.status)throw{message:i,cause:e.status};throw Error(i,{cause:e.status})}}async function w(e,t,r,s="GET",n,i,a,o){return(await m(e,t,r,s,{isSubscription:!1,scope:void 0},n,i,a,o)).response}async function m(e,t,r,s="POST",n={},o,h,p,g){let w=JSON.stringify((0,i.stableCopy)({query:e,variables:r,...n.scopeObject?{scopeObject:n.scopeObject}:{}})),{isSubscription:y,scope:S,subscriptionTopic:k,dispatchTime:v}=n,E=function(e,t,r,s,n,i,a="/_graphql"){let o=[];if("GET"===e&&o.push(`body=${t}`),r&&o.push("subscription=1"),n&&o.push(`scope=${encodeURIComponent(n)}`),s&&o.push(`subscriptionTopic=${encodeURIComponent(s)}`),i&&o.push(`dispatchTime=${encodeURIComponent(i)}`),l.cg){let e=new URL(l.cg.location.href,l.cg.location.origin).searchParams.get("_features");e&&o.push(`_features=${e}`)}return o.length>0?`${a}?${o.join("&")}`:a}(s,encodeURIComponent(w),y,k,S,v,o),P=null;try{let{subscriptionId:r,requestId:n,json:i,status:o}=await _(E,s,e,t,w,h);if(P=r,p&&i.errors){let e=p[o];if(e)for(let r of i.errors){let s=e[r.type];s?.({persistedQueryName:t,errorMessage:r.message})}}let l=function(e,t,r,s){var n,i;if(n=t,i=e,"errors"in i&&(i.errors.filter(e=>{let t=u.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return t||r}).map(e=>{console.error(`Failed to fetch data. Please use this request ID when contacting support: ${n} Error: ${e.type}: ${e.message} (path: ${e.path})`)}),i.errors=i.errors.filter(e=>{let t=u.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return!t&&!r})),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),n=new b(`${t} (Persisted query id: ${r})`,{cause:e.errors},e.extensions?.query_owning_catalog_service);if(s)(0,c.N7)(n),s.error(n);else throw n}if(!("data"in e)){let n=Error(`Expected data property in response: ${JSON.stringify(e)}. persistedQueryId: ${r}, requestId: ${t}`);if(s)(0,c.N7)(n),s.error(n);else throw n}return e}(i,n,e,g);return l&&(0,a.Av)(l),{subscriptionId:P,response:l}}catch(e){if(g)return"object"==typeof e&&null!==e&&"cause"in e&&429===e.cause||(0,c.N7)(e),g.error(e),{subscriptionId:P,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}};throw e}}async function _(e,t,r,s,n,i){return y((0,a.RD)(e),t,r,s,n,i)}async function y(e,t,r,s,n,i){let a,l,u={...(0,p.kt)()};i?.issues_react_perf_test&&(u["X-LUC-Environment"]="issues");let d=(a="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:{Accept:"application/json",...u}}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",...u},...n?{body:n}:void 0})).headers.get("X-Subscription-ID"),h=a.headers.get("X-Github-Request-Id")||"",f=a.status;await g(a,r,s);try{l=await a.json()}catch(r){let t={error:r,status:f,url:e,requestId:h};throw(0,c.N7)(Error(`Failed to parse server JSON response ${JSON.stringify(t)}`)),Error(`Failed to parse server response. Please try again later. ${JSON.stringify(t)}`)}return{subscriptionId:d,requestId:h,json:l,status:f}}let S=[{kind:"linked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var k=r(69719),v=r(35932),E=r(69982);function P(e){return(0,E.unstable_scheduleCallback)(E.unstable_LowPriority,e)}let T={cancel:()=>!1,schedule:e=>((0,n.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,r){return this.relayNetwork.execute(e,t,r)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},r,n,a,o){(0,s._)(this,"relayNetwork",void 0),(0,s._)(this,"ssrPreloadedData",void 0),(0,s._)(this,"preloadedSubscriptions",void 0),(0,s._)(this,"warningsShown",void 0),(0,s._)(this,"enabled_features",void 0),(0,s._)(this,"maxAge",void 0),(0,s._)(this,"errorCallbacks",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=r,this.warningsShown=new Set,this.maxAge=a,this.errorCallbacks=o,this.relayNetwork=i.Network.create((e,t)=>i.Observable.create(r=>{let s=function({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:s,emitWarning:n,enabledFeatures:i,maxAge:a,errorCallbacks:o,observer:c}){if(!e.id)throw Error("params has no id property!");if(e.id&&r){let s=JSON.stringify(t),n=r.get(e.id)?.get(s),i=Math.floor(Date.now()/1e3),o=n?.timestamp;if(n&&(c.next(n),!(a&&o&&i>o+a)))return void c.complete();e.metadata?.isRelayRouteRequest&&(0,l.g5)()}let u="mutation"===e.operationKind?"POST":"GET";if(l.KJ)return w(e.id,e.name,t,u,s,i,o,c)}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:n,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:a,errorCallbacks:this.errorCallbacks,observer:r});s instanceof Promise&&s.then(e=>{if(!Array.isArray(e)&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let r in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(r,t[e][r])}r.next(e),r.complete()})}),(e,t)=>(function(e,t,r=new Map){let s=e.id,n=e.name;return i.Observable.create(i=>{let a=()=>{},o=!1;return async function(){if(!s)throw Error("unexpected operation with no id!");let l=e.metadata?.scope,u=function(e,t,r,s){let n=s.get(e);if(n)e:for(let[e,s]of n){for(let[s,n]of Object.entries(JSON.parse(e)))if("$scope"===s&&r!==n||t[s]!==n)continue e;return s}}(s,t,l,r),d=null;if(u)d=u.subscriptionId,u.response&&i.next(u.response);else try{let e=await m(s,n,t,"GET",{isSubscription:!0,scope:l});d=e.subscriptionId,e.response&&i.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,k.H)();if(o)return;let r=(0,v.$)(e,d,async({scope_object:e,subscription_topic:r,dispatch_time:a})=>{try{let{response:o}=await m(s,n,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:r,dispatchTime:a,scope:l});o&&i.next(o)}catch(e){(0,c.N7)(e,{message:`Error in fetching update for ${s} with variables ${JSON.stringify(t)}`})}});r?.unsubscribe&&(a=r.unsubscribe)}catch(e){i.error(e)}}(),{get closed(){return o},unsubscribe(){o=!0,a()}}})})(e,t,this.preloadedSubscriptions))}};let R=(e,t)=>{let r=new SSRNetwork(new Map,{},new Map,e,void 0,t),s=new i.Environment({scheduler:T,store:new i.Store(new i.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:P}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,i.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.description)),t.join("_")}return e.id},network:r,missingFieldHandlers:S});return s.options={baseUrl:e,getPreloadedSubscriptions:()=>r.getPreloadedSubscriptions()},s};function N({environment:e,query:t,variables:r={}}){let s=(0,i.getRequest)(t),n=(0,i.createOperationDescriptor)(s,r);return e.retain(n),(0,i.fetchQuery)(e,t,r,{fetchPolicy:"store-or-network"})}},25903:(e,t,r)=>{r.d(t,{M3:()=>l,Nh:()=>c,Wk:()=>o,i4:()=>i});var s=r(30391),n=r(96540);let i=["GRAY","BLUE","GREEN","YELLOW","ORANGE","RED","PINK","PURPLE"],a={BLUE:"accent",GREEN:"success",YELLOW:"attention",ORANGE:"severe",RED:"danger",PINK:"sponsors",PURPLE:"done"},o=(e="GRAY")=>{let{getPresentationalColor:t}=l();return t(e)},l=()=>{let{theme:e,resolvedColorScheme:t="light"}=(0,s.DP)();return{getPresentationalColor:(0,n.useCallback)((r="GRAY")=>{let s=u(t),n=e?.colorSchemes?.[s]?.colors;if("GRAY"===r)return{bg:n?.canvas?.subtle,fg:n?.fg?.muted,border:n?.border?.default,accent:n?.fg?.subtle};{let e=n?.[a[r]];return{bg:e?.subtle,fg:e?.fg,border:e?.muted,accent:e?.emphasis}}},[e,t])}},c=e=>i.includes(e),u=e=>"light_colorblind"===e||"light_tritanopia"===e?"light":"dark_colorblind"===e||"dark_tritanopia"===e?"dark":e},94672:(e,t,r)=>{r.d(t,{n:()=>u});var s=r(74848),n=r(34614),i=r(13922),a=r(96540);let o={issueTypeTokenContainer:"IssueTypeToken-module__issueTypeTokenContainer--ZxBhZ",tokenText:"IssueTypeToken-module__tokenText--fyjvE",token:"IssueTypeToken-module__token--iQHKj"};var l=r(18828),c=r(34164);let u=({name:e,color:t,href:r,getTooltipText:u,size:h,sx:p,className:f})=>{let b=(0,a.useRef)(null),[g,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>w(d(b.current)),[w,b]);let m=(0,s.jsx)(n.A,{href:r,children:(0,s.jsx)(i.A,{className:(0,c.$)(o.token,f),"data-color":t,ref:b,sx:p,text:(0,s.jsx)("span",{className:o.tokenText,children:e})})}),_=u(g);return(0,s.jsx)("div",{className:o.issueTypeTokenContainer,"data-size":h,children:_?(0,s.jsx)(l.m,{text:_,children:m}):m})},d=e=>!!e&&!!e.firstElementChild&&e.firstElementChild.scrollWidth>e.firstElementChild.clientWidth;try{u.displayName||(u.displayName="IssueTypeToken")}catch{}}}]);
//# sourceMappingURL=ui_packages_issue-types_constants_constants_ts-ui_packages_relay-environment_relay-environmen-f4603e-69a30f8c901a.js.map